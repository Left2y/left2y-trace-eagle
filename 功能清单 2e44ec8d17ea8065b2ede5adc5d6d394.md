# 功能清单

# ② 功能清单文档（Feature List）

> 标注：MVP（必须）、P1（强烈建议）、P2（可选增强）
> 

## A. 选择与输入

- **MVP**：读取当前选中 items（至少 1 个）
- **MVP**：过滤非图片资源（无法矢量化的格式提示跳过）
- **P1**：支持“只处理当前选中中的 PNG/JPG/BMP/PNM”
- **P2**：支持拖拽本地文件到插件窗口（不依赖 Eagle 选中）

## B. 转换引擎（mkbitmap + potrace）

- **MVP**：对每张图执行：mkbitmap → PBM → potrace → SVG
- **MVP**：默认预设（Icon Hard / Logo Smooth / Scan Cleanup）
- **MVP**：关键参数可调（并在 UI 中映射为“人话”）
    - mkbitmap：scale / threshold / filter / blur / invert / linear|cubic
    - potrace：alphamax / opttolerance / turdsize / tight
- **P1**：可选输出模式
    - 单一 path（potrace `-flat`）用于某些导入器兼容
    - `-group`（便于后续编辑分组）
- **P2**：自动尝试 2~3 组阈值并让用户在预览中选择最佳（半自动调参）

## C. UI 与交互

- **MVP**：显示选中数量、列表（文件名/尺寸可选）
- **MVP**：开始/取消按钮 + 总进度 + 当前文件进度
- **MVP**：完成提示（成功 N、失败 M，失败原因列表）
- **P1**：单张预览（显示输入缩略图 + 输出 SVG 预览）
- **P1**：参数“高级模式”折叠面板（避免 UI 过载）
- **P2**：批量规则：按文件名匹配自动套用预设（如包含 “icon-” 用硬边）

## D. 输出与导入 Eagle

- **MVP**：导入生成的 SVG 到 Eagle：`eagle.item.addFromPath`
- **MVP**：命名规则（默认：`{原名}-vector.svg`）
- **MVP**：自动 tags（可选）：`vectorized`, `potrace`, `mkbitmap`
- **P1**：导入到与原图相同 folder（若可获取 folder 信息）
- **P1**：在 annotation 写入“参数快照”（便于回溯复现）
- **P2**：保留原图与 SVG 的关联（例如在 annotation 互相写入对方 id）

## E. 配置与持久化

- **MVP**：保存上次使用参数与预设（localStorage 或 JSON 配置文件）
- **P1**：导入/导出配置（JSON）
- **P2**：预设管理（新增/重命名/删除自定义预设）

## F. 日志与可诊断性

- **MVP**：控制台日志 + UI 错误提示
- **P1**：导出日志文件（包含每个文件的命令行与 stderr）
- **P2**：性能统计（耗时、失败率、平均参数）